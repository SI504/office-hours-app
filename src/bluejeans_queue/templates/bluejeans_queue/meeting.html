{% extends "base.html" %}

{% block content %}
<p>Welcome to <strong>{{ owner.get_full_name }}'s</strong> meeting queue.</p>
<ul>
  {% if not meeting %}
  <li>Number of people currently in line: <strong>{{ queue_length }}</strong></li>
  <li>You are in not in line</li>
  {% else %}
  <li>You are in line to meet with {{ owner.get_full_name }}</li>
  {% if queue_ahead > 0 %}
  <li>There are {{ queue_ahead }} people ahead of you (total in queue: {{ queue_length }})</li>
  {% else %}
  <li><strong>You are at the front of the line. Join the meeting now!</strong></li>
  {% endif %}
  <li>Meet with them here: <a href="{{ meeting.bjn_meeting_url }}">{{ meeting.bjn_meeting_url }}</a></li>
  <li>New to using BlueJeans? <a href="https://its.umich.edu/communication/videoconferencing/blue-jeans/getting-started" target="_blank">Learn about using BlueJeans at U-M</a>.</li>
  {% endif %}
</ul>

<form class="form-inline" method="post" onsubmit="submit.disabled = true; return true;" action="{% url 'meeting' owner %}">
  {% csrf_token %}
  {% if not meeting %}
  <input type="hidden" name="action" value="join" />
  <button type="submit" name="submit" class="btn btn-primary">Join the line</button>
  {% else %}
  <input type="hidden" name="action" value="leave" />
  <button type="submit" name="submit" onclick="return confirm('Are you sure?');" class="btn btn-warning">Leave the line</button>
  {% endif %}
</form>

{% if owner == request.user %}
<p class="alert alert-info col-lg">
  This is your queue, you can
  <a href="{% url 'manage' %}">manage it</a>.
</p>
{% endif %}

<hr />
<a target="_blank" href="https://documentation.its.umich.edu/node/1833">
    Documentation about using office hours
</a>

{% endblock %}

{% block scripts %}
<script type="text/javascript">
setTimeout(() => location.reload(), 10000);
</script>
{% endblock %}
